# This is a basic workflow to help you get started with Actions

name: mobileapp

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]
env: 
      home: "E:"
      Envir: "DEV"
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  mobileapp-test:
    runs-on: self-hosted
    steps:
      - name: JSON to variables
        uses: antifree/json-to-variables@v1.0.1
        with:
          filename: ${{ env.datafile }}
          prefix: test
        env: 
           #home: "D:/"
           DY_UTIL: "${{ env.home }}\\dymmobileapp"
           #Envir: "DEV"
           datafile: "${{ env.home }}\\config.json"
      - name: Show output
        run: echo "The name was ${{ env.test_name }}, ${{ env.test_age }}, ${{ env.test_car }}"
      - name: Print Envs
        run: |
          echo "$Envir"
          echo "$home"
          echo "$datafile"
          echo "$DY_UTIL"
      - name: JSON to variables
        uses: antifree/json-to-variables@v1.0.1
        with:
          filename: ${{ env.DY_FILE }}
          prefix: data
        env: 
           artifactorytarget: ${{ env.data_GLOBAL_DY_BINARYREPONAME }}
           DY_WINDIR: ${{ env.data_GLOBAL_DY_BASEDIR }}
      - name: Clone mobile-app PRIVATE repository
        uses: GuillaumeFalourd/clone-github-repo-action@v1
        with:
          owner: 'Bharathi'
          repository: 'testpub'
