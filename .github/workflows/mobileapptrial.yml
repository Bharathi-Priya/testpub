# This is a basic workflow to help you get started with Actions

name: mobileapp

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]
env: 
      home: "D:"
      Envir: "DEV"
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  mobileapp-test:
    runs-on: self-hosted
    steps:
      - name: Print Envs
        run: |
          echo "$Envir"
          echo "$home"
          echo "$datafile"
          echo "$DY_UTIL"
        env: 
           #home: "D:/"
           DY_UTIL: "${{ env.home }}\\dymmobileapp"
           #Envir: "DEV"
           datafile: "${{ env.home }}\\config.json"
      - name: JSON to variables
        uses: antifree/json-to-variables@v1.0.1
        with:
          filename: "${{ env.datafile }}"
          prefix: test
      - name: Show output
        run: echo "The name was ${{ env.test_name }}, ${{ env.test_age }}, ${{ env.test_car }}"
        
